<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Virus Tracker</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body, #map {
      height: 100%;
      margin: 0;
    }

    /* Style for the tracker and SOL price */
    #tracker-container {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 20px;
      z-index: 1000;
    }

    #tracker-title {
      color: #ff4d4d;
      font-size: 28px;
      font-weight: 800;
      font-family: 'Arial Black', sans-serif;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 20px;
      border: 2px solid #ff4d4d;
      border-radius: 10px;
      text-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.4);
    }

    #sol-price {
      color: #00bfff;
      font-size: 28px;
      font-weight: 800;
      font-family: 'Arial Black', sans-serif;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 20px;
      border: 2px solid #00bfff;
      border-radius: 10px;
      text-shadow: 0 0 5px rgba(0, 191, 255, 0.7);
      box-shadow: 0 0 10px rgba(0, 191, 255, 0.4);
    }
  </style>
</head>
<body>
  <!-- Container for both elements -->
  <div id="tracker-container">
    <div id="tracker-title">$VIRUS TRACKER</div>
    <div id="sol-price">SOL Price: $0.00</div>
  </div>

  <!-- Map container -->
  <div id="map"></div>

  <!-- Include Leaflet.js for maps -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  
  <!-- WebSocket Integration to fetch SOL price from Binance -->
  <script>
    // Create WebSocket connection to Binance for Solana price updates
    const socket = new WebSocket("wss://stream.binance.com:9443/ws/solusdt@trade");

    // On connection open, log success
    socket.onopen = () => {
      console.log("WebSocket connected for SOL price updates.");
    };

    // Listen for messages from the WebSocket
    socket.onmessage = (event) => {
      try {
        const data = JSON.parse(event.data);
        const solPrice = parseFloat(data.p); // 'p' is the price from Binance WebSocket message
        document.getElementById("sol-price").innerText = `SOL Price: $${solPrice.toFixed(2)}`;
      } catch (error) {
        console.error("Error parsing WebSocket message:", error);
      }
    };

    // Handle errors in the WebSocket connection
    socket.onerror = (error) => {
      console.error("WebSocket error:", error);
      document.getElementById("sol-price").innerText = "SOL Price: Error";
    };

    // Close WebSocket connection (optional)
    socket.onclose = () => {
      console.log("WebSocket connection closed.");
    };
  </script>

  <!-- Include your external script (if needed for map or other functions) -->
  <script src="script.js"></script>
</body>
</html>
